<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QRLS Team Builder</title>
  <style>
    .logo {
      width: 42px;
      height: 42px;
      object-fit: contain;
      margin-right: 0.6rem;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0%, #ffffffdd, #ff9f1c);
      box-shadow: 0 0 0 1px rgba(255,255,255,0.25),
                  0 8px 18px rgba(0,0,0,0.6);
    }

    :root {
      --orange: #ff9f1c;
      --blue:   #208cff;
      --bg: #020308;
      --card-bg: #050915;
      --card-elevated: #071020;
      --accent: #208cff;
      --accent-soft: #208cff40;
      --accent-good: #4fd38b;
      --accent-bad: #ff6b81;
      --border-subtle: #243249;
      --text-main: #fdfdfd;
      --text-muted: #b6c2e5;
      --radius-lg: 16px;
      --radius-md: 10px;
      --shadow-strong: 0 18px 45px rgba(0,0,0,0.7);
      --transition-fast: 150ms ease-out;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      background:
        radial-gradient(circle at 15% -20%, rgba(255,159,28,0.24), transparent 55%),
        radial-gradient(circle at 85% 120%, rgba(32,140,255,0.28), transparent 55%),
        linear-gradient(135deg, #020308, #040714);
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 2.5rem 1.5rem;
    }

    .card {
      width: 100%;
      max-width: 960px;
      background:
        radial-gradient(circle at top left, rgba(255,159,28,0.25), transparent 55%),
        radial-gradient(circle at bottom right, rgba(32,140,255,0.35), transparent 60%),
        linear-gradient(145deg, #050915, #050914);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(255,255,255,0.10);
      box-shadow: var(--shadow-strong);
      padding: 1.75rem 2rem 2rem;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0% 100%, rgba(255,159,28,0.18), transparent 60%),
        radial-gradient(circle at 100% 0%, rgba(32,140,255,0.22), transparent 60%);
      opacity: 0.9;
      pointer-events: none;
      z-index: -1;
    }

    header {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1rem;
    }

    h1 {
      margin: 0;
      font-size: 1.6rem;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .tag {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      color: var(--text-muted);
      background: linear-gradient(120deg, rgba(255,159,28,0.14), rgba(32,140,255,0.16));
      white-space: nowrap;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1.25rem;
      align-items: center;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      min-width: 0;
    }

    .field.inline {
      flex-direction: row;
      align-items: center;
      gap: 0.5rem;
    }

    label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
    }

    select,
    input[type="number"] {
      background: rgba(5,8,22,0.95);
      border-radius: var(--radius-md);
      border: 1px solid var(--border-subtle);
      color: var(--text-main);
      padding: 0.5rem 0.7rem;
      min-width: 180px;
      font-size: 0.95rem;
      transition:
        border-color var(--transition-fast),
        box-shadow var(--transition-fast),
        background var(--transition-fast),
        transform var(--transition-fast);
      appearance: none;
    }

    select {
      padding-right: 2rem;
      background-image:
        linear-gradient(45deg, transparent 50%, var(--text-muted) 50%),
        linear-gradient(135deg, var(--text-muted) 50%, transparent 50%);
      background-position:
        calc(100% - 14px) calc(50% - 3px),
        calc(100% - 9px) calc(50% - 3px);
      background-size: 6px 6px;
      background-repeat: no-repeat;
    }

    select:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 1px var(--accent-soft);
      background: rgba(8,12,32,0.98);
      transform: translateY(-1px);
    }

    input[type="number"] {
      width: 120px;
      text-align: right;
    }

    .pill-row {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.35rem 0.6rem;
      border-radius: 999px;
      background: rgba(3,7,20,0.9);
      border: 1px solid rgba(255,255,255,0.12);
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--orange), var(--blue));
    }

    /* Draft boards bar */
    .team-row {
      margin: 0.75rem 0 1rem;
    }

    .team-row-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.3rem;
    }

    .team-row-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
    }

    .team-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    .team-tab {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(3,7,20,0.9);
      color: var(--text-muted);
      font-size: 0.78rem;
      padding: 0.2rem 0.7rem;
      cursor: pointer;
      transition:
        background var(--transition-fast),
        border-color var(--transition-fast),
        color var(--transition-fast),
        transform var(--transition-fast);
    }

    .team-tab:hover {
      border-color: var(--accent);
      color: var(--text-main);
      transform: translateY(-1px);
    }

    .team-tab.active {
      background: linear-gradient(135deg, rgba(255,159,28,0.85), rgba(32,140,255,0.9));
      color: #fff;
      border-color: transparent;
    }

    .team-add {
      background: none;
      border: 1px dashed rgba(255,255,255,0.35);
      border-radius: 999px;
      color: var(--text-muted);
      padding: 0.15rem 0.6rem;
      font-size: 0.75rem;
      cursor: pointer;
      transition:
        background var(--transition-fast),
        border-color var(--transition-fast),
        color var(--transition-fast),
        transform var(--transition-fast);
    }

    .team-add:hover {
      background: rgba(255,255,255,0.06);
      border-style: solid;
      color: var(--text-main);
      transform: translateY(-1px);
    }

    .summary {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1rem;
      margin-top: 0.5rem;
    }

    .summary-card {
      background:
        radial-gradient(circle at top, rgba(255,159,28,0.18), transparent 70%),
        radial-gradient(circle at bottom right, rgba(32,140,255,0.2), transparent 70%),
        #050915;
      border-radius: 14px;
      padding: 0.8rem 0.95rem;
      border: 1px solid rgba(255,255,255,0.10);
      position: relative;
      overflow: hidden;
    }

    .summary-card::before {
      content: "";
      position: absolute;
      top: -40%;
      right: -20%;
      width: 70%;
      height: 150%;
      background: radial-gradient(circle at 0 0, rgba(255,255,255,0.12), transparent 60%);
      opacity: 0.4;
      pointer-events: none;
    }

    .summary-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }

    .summary-value {
      font-size: 1.25rem;
      font-weight: 600;
    }

    .summary-sub {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.1rem;
    }

    .good {
      color: var(--accent-good);
    }

    .bad {
      color: var(--accent-bad);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1.6rem;
      font-size: 0.9rem;
      border-radius: 12px;
      overflow: hidden;
      background: #050812;
      border: 1px solid rgba(255,255,255,0.10);
    }

    thead {
      background: linear-gradient(120deg, rgba(255,159,28,0.16), rgba(32,140,255,0.25));
    }

    th,
    td {
      padding: 0.55rem 0.7rem;
      text-align: left;
    }

    th {
      color: var(--text-muted);
      font-weight: 500;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    tr + tr td {
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    tr:nth-child(even) td {
      background: #060a16;
    }

    .salary-col {
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .slot-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 28px;
      height: 22px;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(255,159,28,0.25), rgba(32,140,255,0.4));
      color: #ffffff;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .footnote {
      margin-top: 0.9rem;
      font-size: 0.78rem;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    @media (max-width: 800px) {
      .card {
        padding: 1.4rem 1.25rem 1.6rem;
      }
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      .row {
        flex-direction: column;
        align-items: stretch;
      }
      select,
      input[type="number"] {
        width: 100%;
      }
      .summary {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <header>
      <div>
        <h1>
          <img src="qrls-logo.png" alt="QRLS logo" class="logo">
          QRLS Team Builder
        </h1>
        <div class="pill-row" style="margin-top:0.4rem;">
          <span class="pill-dot"></span>
          <span>Build and compare multiple draft boards under a salary cap.</span>
        </div>

        <div class="team-row">
          <div class="team-row-header">
            <span class="team-row-label">Draft boards</span>
            <button class="team-add" id="addTeamBtn" type="button">+ New</button>
          </div>
          <div class="team-bar" id="teamsBar"></div>
        </div>
      </div>

      <div class="field inline">
        <label for="capInput">Cap</label>
        <input type="number" id="capInput" value="600" min="0" step="5" />
      </div>
    </header>

    <div class="row">
      <div class="field">
        <label for="player1">Player 1</label>
        <select id="player1">
          <option value="">-- Select player --</option>
        </select>
      </div>
      <div class="field">
        <label for="player2">Player 2</label>
        <select id="player2">
          <option value="">-- Select player --</option>
        </select>
      </div>
      <div class="field">
        <label for="player3">Player 3</label>
        <select id="player3">
          <option value="">-- Select player --</option>
        </select>
      </div>
    </div>

    <div class="summary">
      <div class="summary-card">
        <div class="summary-label">P1 / P2 / P3 Salary</div>
        <div class="summary-value" id="slotSalaries">– / – / –</div>
        <div class="summary-sub">Individual salary for each slot.</div>
      </div>
      <div class="summary-card">
        <div class="summary-label">Total Salary</div>
        <div class="summary-value" id="totalSalary">0</div>
        <div class="summary-sub">Sum of all three selected players.</div>
      </div>
      <div class="summary-card">
        <div class="summary-label">Distance From Cap</div>
        <div class="summary-value" id="distanceFromCap">0</div>
        <div class="summary-sub">Green = under cap, red = over.</div>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>Slot</th>
          <th>Player</th>
          <th class="salary-col">Salary</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><span class="slot-pill">P1</span></td>
          <td id="p1Name">–</td>
          <td class="salary-col" id="p1Salary">–</td>
        </tr>
        <tr>
          <td><span class="slot-pill">P2</span></td>
          <td id="p2Name">–</td>
          <td class="salary-col" id="p2Salary">–</td>
        </tr>
        <tr>
          <td><span class="slot-pill">P3</span></td>
          <td id="p3Name">–</td>
          <td class="salary-col" id="p3Salary">–</td>
        </tr>
      </tbody>
    </table>

    <div class="footnote">
      <span>Each board remembers its own cap + picks (saved locally).</span>
      <span>Try creating a few boards for different strategies.</span>
    </div>
  </div>

  <script>
    const players = [
      { name: "Alex (SUB)", salary: 300 },
      { name: "Averded", salary: 300 },
      { name: "Storm Soku", salary: 300 },
      { name: "Patty_F5", salary: 290 },
      { name: "Kyptero", salary: 285 },
      { name: "reez", salary: 280 },
      { name: "MassacredTtv", salary: 275 },
      { name: "Vivo", salary: 275 },
      { name: "Bubs", salary: 270 },
      { name: "gnflicks", salary: 270 },
      { name: "JackFazKnight", salary: 270 },
      { name: "jayjr.", salary: 270 },
      { name: "Taz", salary: 270 },
      { name: "unfunny yummy", salary: 265 },
      { name: "jjcool878", salary: 260 },
      { name: "sorry", salary: 260 },
      { name: "Docta Geowge", salary: 255 },
      { name: "Niner", salary: 255 },
      { name: "N.O.R.M.", salary: 250 },
      { name: "mel", salary: 245 },
      { name: "Chop jr", salary: 235 },
      { name: "Deadsinho", salary: 235 },
      { name: "ExpiredPyro", salary: 235 },
      { name: "Mimeticz", salary: 230 },
      { name: "Xireq", salary: 230 },
      { name: "Insaneclown1077", salary: 220 },
      { name: "Kuawhii", salary: 220 },
      { name: "TheeSpaceCase", salary: 220 },
      { name: "Zeethol", salary: 220 },
      { name: "boltend", salary: 215 },
      { name: "Crimson", salary: 215 },
      { name: "Warshinho", salary: 215 },
      { name: "BIGbadBULLMAN13", salary: 210 },
      { name: "Cstreif", salary: 210 },
      { name: "itsos", salary: 210 },
      { name: "Judy_Mcb00ty", salary: 210 },
      { name: "Longneck - Real", salary: 210 },
      { name: "reservewolf", salary: 210 },
      { name: "Scanti.", salary: 210 },
      { name: "sockybo", salary: 210 },
      { name: "CrocsWithSockz", salary: 205 },
      { name: "Cubnuts", salary: 205 },
      { name: "JordanSob", salary: 205 },
      { name: "Moose", salary: 205 },
      { name: "Nobody", salary: 205 },
      { name: "Shadow Dweller", salary: 205 },
      { name: "Snoozzz", salary: 205 },
      { name: "Dragony99", salary: 200 },
      { name: "f150greyhound", salary: 200 },
      { name: "HeyZuesy", salary: 195 },
      { name: "TwistyTripod", salary: 195 },
      { name: "Bitzy", salary: 190 },
      { name: "CeeJay", salary: 190 },
      { name: "kachow", salary: 190 },
      { name: "Not_Sniper.exe", salary: 190 },
      { name: "BBB_tomzz", salary: 190 },
      { name: "ZDL Pinky", salary: 190 },
      { name: "Chawigo", salary: 185 },
      { name: "Daniel", salary: 185 },
      { name: "Kento", salary: 185 },
      { name: "OPS x Shadow", salary: 185 },
      { name: "SkyDrggn", salary: 185 },
      { name: "DarkRaine", salary: 180 },
      { name: "Tre3post", salary: 180 },
      { name: "W4ffles", salary: 180 },
      { name: "WontedToast", salary: 180 },
      { name: "MF RedBeard (SUB)", salary: 175 },
      { name: "Pr0sp3cttt", salary: 175 },
      { name: "Scrxpz", salary: 175 },
      { name: "SnipingXtremist", salary: 175 },
      { name: "XsNIPER50", salary: 175 },
      { name: "Dave", salary: 170 },
      { name: "Fabreasy", salary: 170 },
      { name: "hardstuck henry", salary: 170 },
      { name: "MrPenguin_RL", salary: 170 },
      { name: "Toaster", salary: 170 },
      { name: "a72temas", salary: 165 },
      { name: "Golden Pickle", salary: 165 },
      { name: "Naxxei", salary: 165 },
      { name: "syrupr", salary: 165 },
      { name: "CharredTotem", salary: 160 },
      { name: "Quackz", salary: 160 },
      { name: "SkaiRippa", salary: 160 },
      { name: "SquiddieD", salary: 160 },
      { name: "Blubbernuht", salary: 155 },
      { name: "Drkmxxn", salary: 155 },
      { name: "Shrilldevotee45", salary: 155 },
      { name: "Crez", salary: 150 },
      { name: "Masamune", salary: 150 },
      { name: "Mimsy", salary: 150 },
      { name: "MisterRebel", salary: 150 },
      { name: "xLIGHTSxOUTx52", salary: 150 },
      { name: "Puck", salary: 140 },
      { name: "Rekkaru", salary: 140 },
      { name: "Joepapa72", salary: 135 },
      { name: "Sensei_San", salary: 135 },
      { name: "yuboe", salary: 135 },
      { name: "0xDocx0", salary: 130 },
      { name: "Eclipse9028", salary: 130 },
      { name: "oreo maker", salary: 130 },
      { name: "Panda240SX (SUB)", salary: 130 },
      { name: "KhievGaming", salary: 125 },
      { name: "SirBroDude", salary: 120 },
      { name: "SkaiDevil", salary: 120 },
      { name: "Slam James", salary: 120 },
      { name: "Reverend_RL", salary: 115 },
      { name: "Angel_bx22", salary: 110 },
      { name: "Nyxetheron", salary: 100 },
      { name: "EclypseJade", salary: 75 },
    ];

    const STORAGE_KEY = "qrls_teams_v1";
    let teams = [];
    let activeTeamId = null;

    function getPlayerByName(name) {
      if (!name) return null;
      return players.find((p) => p.name === name) || null;
    }

    function formatSalary(x) {
      if (x === null || x === undefined || isNaN(x)) return "–";
      return x.toFixed(0);
    }

    function buildOptions(select, allowed, selectedName) {
      const prev = selectedName || select.value;
      select.innerHTML = "";
      const baseOpt = document.createElement("option");
      baseOpt.value = "";
      baseOpt.textContent = "-- Select player --";
      select.appendChild(baseOpt);
      allowed.forEach((p) => {
        const opt = document.createElement("option");
        opt.value = p.name;
        opt.textContent = `${p.name} (${p.salary.toFixed(0)})`;
        if (p.name === prev) opt.selected = true;
        select.appendChild(opt);
      });
    }

    function rebuildDropdowns(cap, p1, p2, p3) {
      const s1 = document.getElementById("player1");
      const s2 = document.getElementById("player2");
      const s3 = document.getElementById("player3");

      const selected1 = p1 ? p1.name : "";
      const selected2 = p2 ? p2.name : "";
      const selected3 = p3 ? p3.name : "";

      const allowed1 = players.filter((p) => p.salary <= cap);
      buildOptions(s1, allowed1, selected1);

      const remainingCap2 = cap - (p1 ? p1.salary : 0);
      const allowed2 = players.filter(
        (p) => p.salary <= remainingCap2 && (!p1 || p.name !== p1.name)
      );
      buildOptions(s2, allowed2, selected2);

      const remainingCap3 = cap - (p1 ? p1.salary : 0) - (p2 ? p2.salary : 0);
      const allowed3 = players.filter(
        (p) =>
          p.salary <= remainingCap3 &&
          (!p1 || p.name !== p1.name) &&
          (!p2 || p.name !== p2.name)
      );
      buildOptions(s3, allowed3, selected3);
    }

    function createTeam(name) {
      return {
        id: Date.now().toString(36) + Math.random().toString(36).slice(2, 7),
        name,
        cap: 600,
        picks: [null, null, null],
      };
    }

    function loadTeams() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        if (parsed && Array.isArray(parsed.teams) && parsed.teams.length) {
          teams = parsed.teams;
          activeTeamId = parsed.activeId || parsed.teams[0].id;
        }
      } catch (e) {
        console.error("Failed to load teams", e);
      }
    }

    function saveTeams() {
      try {
        localStorage.setItem(
          STORAGE_KEY,
          JSON.stringify({ teams, activeId: activeTeamId })
        );
      } catch (e) {
        console.error("Failed to save teams", e);
      }
    }

    function getActiveTeam() {
      return teams.find((t) => t.id === activeTeamId) || null;
    }

    function renderTeamTabs() {
      const bar = document.getElementById("teamsBar");
      if (!bar) return;
      bar.innerHTML = "";
      teams.forEach((t, idx) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "team-tab" + (t.id === activeTeamId ? " active" : "");
        btn.textContent = t.name || `Board ${idx + 1}`;
        btn.addEventListener("click", () => {
          activeTeamId = t.id;
          saveTeams();
          renderTeamTabs();
          syncUIFromTeam();
        });
        bar.appendChild(btn);
      });
    }

    function syncUIFromTeam() {
      const team = getActiveTeam();
      const capInput = document.getElementById("capInput");
      if (!team || !capInput) return;

      capInput.value = team.cap;

      const p1 = team.picks[0] ? getPlayerByName(team.picks[0]) : null;
      const p2 = team.picks[1] ? getPlayerByName(team.picks[1]) : null;
      const p3 = team.picks[2] ? getPlayerByName(team.picks[2]) : null;

      rebuildDropdowns(team.cap, p1, p2, p3);

      document.getElementById("player1").value = team.picks[0] || "";
      document.getElementById("player2").value = team.picks[1] || "";
      document.getElementById("player3").value = team.picks[2] || "";

      recompute();
    }

    function recompute() {
      const capInput = document.getElementById("capInput");
      const cap = Number(capInput.value) || 0;

      const s1 = document.getElementById("player1").value;
      const s2 = document.getElementById("player2").value;
      const s3 = document.getElementById("player3").value;

      const p1 = getPlayerByName(s1);
      const p2 = getPlayerByName(s2);
      const p3 = getPlayerByName(s3);

      const sal1 = p1 ? p1.salary : 0;
      const sal2 = p2 ? p2.salary : 0;
      const sal3 = p3 ? p3.salary : 0;

      const total = sal1 + sal2 + sal3;
      const diff = cap - total;

      document.getElementById("slotSalaries").textContent =
        `${formatSalary(sal1)} / ${formatSalary(sal2)} / ${formatSalary(sal3)}`;
      document.getElementById("totalSalary").textContent = formatSalary(total);

      const distanceEl = document.getElementById("distanceFromCap");
      const distance = Math.abs(diff);
      distanceEl.textContent = distance.toFixed(0);
      distanceEl.classList.remove("good", "bad");
      if (diff >= 0) distanceEl.classList.add("good");
      else distanceEl.classList.add("bad");

      document.getElementById("p1Name").textContent = p1 ? p1.name : "–";
      document.getElementById("p2Name").textContent = p2 ? p2.name : "–";
      document.getElementById("p3Name").textContent = p3 ? p3.name : "–";
      document.getElementById("p1Salary").textContent = p1 ? formatSalary(p1.salary) : "–";
      document.getElementById("p2Salary").textContent = p2 ? formatSalary(p2.salary) : "–";
      document.getElementById("p3Salary").textContent = p3 ? formatSalary(p3.salary) : "–";

      // Update active team & re-render tabs
      const team = getActiveTeam();
      if (team) {
        team.cap = cap;
        team.picks = [
          p1 ? p1.name : null,
          p2 ? p2.name : null,
          p3 ? p3.name : null,
        ];
        saveTeams();
        renderTeamTabs();
      }

      // Rebuild dropdowns so cap + picks apply to options
      rebuildDropdowns(cap, p1, p2, p3);
    }

    function init() {
      loadTeams();
      if (!teams.length) {
        const t = createTeam("Board 1");
        teams = [t];
        activeTeamId = t.id;
        saveTeams();
      }

      renderTeamTabs();
      syncUIFromTeam();

      document.getElementById("capInput").addEventListener("input", recompute);
      document.getElementById("player1").addEventListener("change", recompute);
      document.getElementById("player2").addEventListener("change", recompute);
      document.getElementById("player3").addEventListener("change", recompute);

      const addBtn = document.getElementById("addTeamBtn");
      if (addBtn) {
        addBtn.addEventListener("click", () => {
          const idx = teams.length + 1;
          const t = createTeam(`Board ${idx}`);
          teams.push(t);
          activeTeamId = t.id;
          saveTeams();
          renderTeamTabs();
          syncUIFromTeam();
        });
      }
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
